# 要件定義書: ユーザー登録・認証機能

## 概要
ユーザーがメールアドレスとパスワードを使用してアカウント登録（サインイン）できる画面を作成する。
登録時には確認メールを送信する。
パスワード入力時の利便性とセキュリティを考慮したUIを提供する。

## 機能要件

### 1. ユーザー登録画面 (UI)
- **パス**: `/auth/register` (新規作成)
- **入力項目**:
  - メールアドレス (`email`)
  - パスワード (`password`)
  - パスワード確認 (`confirmPassword`)
- **機能**:
  - パスワード入力フィールドはデフォルトで伏せ字（マスク）とする。
  - 「目のマーク」アイコンをクリックすることで、パスワードの表示/非表示を切り替えられる。
  - パスワードとパスワード確認が一致しない場合、エラーメッセージを表示する。
  - 登録ボタン押下時、バリデーションを行い、サーバーへ送信する。

### 2. バックエンド (API)
- **エンドポイント**: `POST /api/auth/register`
- **処理フロー**:
  1. リクエストボディから `email`, `password` を受け取る。
  2. 入力値バリデーション（必須チェック、パスワード長など）。
  3. 既存ユーザーの重複チェック。
  4. パスワードをハッシュ化して保存（`bcrypt` 使用）。
  5. ユーザー情報をデータベース (`User` テーブル) に保存。
  6. 登録完了メールを送信する（`nodemailer` 使用、開発環境ではログ出力またはダミーSMTP）。

### 3. データベース
- **テーブル追加**: `User`
  - `id`: String (UUID)
  - `email`: String (Unique)
  - `password`: String (Hashed)
  - `createdAt`: DateTime
  - `updatedAt`: DateTime

## 非機能要件
- **セキュリティ**: パスワードは平文で保存せず、必ずハッシュ化する。
- **ユーザビリティ**: アイコンを使用して直感的な操作を提供する。
- **技術スタック**:
  - Next.js (App Router)
  - Prisma (SQLite)
  - bcryptjs (ハッシュ化)
  - nodemailer (メール送信)
  - FontAwesome (アイコン)

## 完了条件
- `/auth/register` にアクセスし、フォームが表示されること。
- パスワードの表示/非表示切り替えが動作すること。
- 有効な情報を送信するとユーザーがDBに作成され、登録メール（またはログ）が確認できること。
- パスワード不一致時にエラーが表示され、登録されないこと。